#movimientos_grid
  %table.togrid{:id=>"movimientos_#{Time.now}"}
    %tr
      %th Fecha
      %th Reserva
      %th Titular
      %th Operacion
      %th Entidad
      %th Monto

    - total = Array.new(3,0)

    - for movimiento in @movimientos
      %tr

        %td= movimiento.try(:fecha)
        %td= movimiento.try(:reserva_id)
        %td= movimiento.try(:reserva).try(:pasajeros).try(:first).try(:name)
        %td= movimiento.type
        %td
          =movimiento.try(:entidad).type
          =movimiento.try(:entidad).try(:name)
        %td
          =# movimiento.try(:monto).try(:moneda).try(:simbolo)
          -# muestro el monto en la moneda de la reserva
          -# if movimiento.type == "Pago"
            = movimiento.try(:reserva).try(:moneda)
            = movimiento.monto.to_money.format
            -if(movimiento.try(:reserva).try(:moneda_id)!=movimiento.try(:monto).try(:moneda_id))
              ="(cambio)"
          -#else
            = movimiento.try(:monto).try(:moneda).try(:simbolo)
            = movimiento.try(:monto).try(:valor)
          = movimiento.monto.to_money.format

          -#if movimiento.try(:monto).try(:moneda_id)
            -total[movimiento.try(:monto).try(:moneda_id)-1] += movimiento.try(:monto).try(:valor)
  %table.wide
    %tr
      %td
        Pesos $
        %b
          =total[0]
      %td
        Dolares u$s
        %b
          =total[1]
      %td
        Euros â‚¬
        %b
          =total[2]

